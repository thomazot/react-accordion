{"version":3,"sources":["styles/img/check.svg","styles/img/less.svg","components/AccordionItem/AccordionItem.style.ts","styles/img/down.svg","stores/atoms/ListItemState.ts","services/Api.ts","stores/selectors/UpdateListState.ts","components/AccordionItem/AccordionItem.tsx","components/Accordion/Accordion.style.ts","components/Accordion/Accordion.tsx","pages/Home/Home.tsx","App.tsx","index.tsx"],"names":["AccordionItem","styled","li","props","nv","count","total","IconLess","IconCheck","expanded","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","d","SvgDown","_ref","svgRef","title","titleId","xmlns","viewBox","ref","id","ForwardRef","KEY_LOCAL_STORAGE","ListItemState","atom","default","selector","get","a","fetch","headers","Accept","then","response","json","effects_UNSTABLE","setSelf","onSet","itemList","localStorage","getItem","JSON","parse","newValue","setItem","stringify","updateSearchItem","updateItem","checked","map","item","newItem","children","UpdateListState","set","DefaultValue","oldValue","name","level","useState","setExpanded","setCount","setUpdateListState","useSetRecoilState","undefined","useEffect","filter","child","data-checked","data-count","data-level","data-total","data-testid","type","onChange","updateChecked","htmlFor","onClick","fill","width","height","items","React","memo","Accordion","ul","aria-expanded","Home","useRecoilValue","App","Suspense","fallback","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.c5a03be4.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/check.cbd8fde1.svg\";","export default __webpack_public_path__ + \"static/media/less.be5a83bd.svg\";","import styled from \"styled-components\"\nimport IconCheck from \"styles/img/check.svg\"\nimport IconLess from \"styles/img/less.svg\"\n\ntype LiProps = {\n  nv: number\n  count: number\n  total?: number\n  expanded?: boolean\n}\n\nexport const AccordionItem = styled.li<LiProps>`\n  list-style: none;\n  padding: 0;\n  margin: 0;\n\n  > div {\n    display: flex;\n    align-items: stretch;\n\n    &:hover {\n      background: rgba(0, 0, 0, 0.2);\n    }\n\n    label {\n      flex: 1;\n      min-width: 0;\n      display: flex;\n      align-items: center;\n      padding: 16px;\n      cursor: pointer;\n\n      ${(props) =>\n        `\n        padding-left: ${props.nv * 26}px;\n      `}\n\n      &:before {\n        content: \"\";\n        width: 16px;\n        height: 16px;\n        display: block;\n        border: solid 1px rgba(0, 0, 0, 0.2);\n        border-radius: 3px;\n        margin-right: 8px;\n        ${({ count, total = 0 }) =>\n          count > 0 &&\n          count !== total &&\n          `\n          background: #00a3ea url(${IconLess}) no-repeat center center;\n          background-size: 10px 10px;\n        `}\n      }\n    }\n\n    input {\n      position: absolute;\n      opacity: 0;\n    }\n\n    input:checked + label:before {\n      ${({ count, total = 0 }) =>\n        count < total\n          ? `\n          background: #00a3ea url(${IconLess}) no-repeat center center;\n          background-size: 10px 10px;\n        `\n          : `\n          background: #00a3ea url(${IconCheck}) no-repeat center center;\n          background-size: 10px 10px;\n        `}\n    }\n\n    button {\n      width: 50px;\n      background: none;\n      border: none;\n      appearance: none;\n      cursor: pointer;\n\n      svg {\n        transition: all 0.2s ease-in-out;\n        ${({ expanded = false }) =>\n          expanded ? `transform: rotate(-180deg);` : `transform: rotate(0deg);`}\n      }\n\n      &:focus {\n        outline: none;\n      }\n\n      &:hover {\n        color: #00a3ea;\n      }\n    }\n  }\n`\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M505.755 123.592c-8.341-8.341-21.824-8.341-30.165 0L256.005 343.176 36.421 123.592c-8.341-8.341-21.824-8.341-30.165 0s-8.341 21.824 0 30.165l234.667 234.667a21.275 21.275 0 0015.083 6.251 21.275 21.275 0 0015.083-6.251l234.667-234.667c8.34-8.341 8.34-21.824-.001-30.165z\"\n});\n\nfunction SvgDown(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 512.011 512.011\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgDown);\nexport default __webpack_public_path__ + \"static/media/down.d3255eb4.svg\";\nexport { ForwardRef as ReactComponent };","import { atom, selector } from \"recoil\"\nimport Api from \"services\"\nimport IItem from \"typings/IITem\"\n\nconst KEY_LOCAL_STORAGE = \"@KEY_LOCAL_STORAGE\"\n\nconst ListItemState = atom({\n  key: \"@LIST_ITEM_STATE\",\n  default: selector<IItem[]>({\n    key: \"@LIST_ITEM_SELECTOR\",\n    get: async () => await Api<IItem[]>(\"/react-accordion/data/db.json\")\n  }),\n  effects_UNSTABLE: [\n    ({ setSelf, onSet }) => {\n      const itemList = localStorage.getItem(KEY_LOCAL_STORAGE)\n\n      if (itemList !== null) {\n        setSelf(JSON.parse(itemList))\n      }\n\n      onSet((newValue) =>\n        localStorage.setItem(KEY_LOCAL_STORAGE, JSON.stringify(newValue))\n      )\n    }\n  ]\n})\n\nexport default ListItemState\n","export default function Api<T>(url: string): Promise<T> {\n  return fetch(url, {\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Accept: \"application/json\"\n    }\n  }).then((response) => response.json())\n}\n","import { DefaultValue, selector } from \"recoil\"\nimport ListItemState from \"stores/atoms/ListItemState\"\nimport IItem from \"typings/IITem\"\n\nfunction updateSearchItem(\n  itemList: IItem[],\n  updateItem: IItem[],\n  checked?: boolean\n): IItem[] {\n  const itemListUpdate = itemList.map((item) => {\n    let newItem = item\n    if (item.id === updateItem[0].id) {\n      return {\n        ...updateItem[0],\n        children: updateSearchItem(\n          updateItem[0].children,\n          updateItem,\n          updateItem[0].checked\n        )\n      }\n    }\n    if (item.children.length > 0) {\n      return {\n        ...item,\n        children: updateSearchItem(item.children, updateItem, checked),\n        checked:\n          typeof checked !== \"undefined\"\n            ? checked\n            : typeof item.checked !== \"undefined\"\n            ? item.checked\n            : false\n      }\n    }\n    return {\n      ...newItem,\n      checked:\n        typeof checked !== \"undefined\"\n          ? checked\n          : typeof item.checked !== \"undefined\"\n          ? item.checked\n          : false\n    }\n  })\n\n  return itemListUpdate\n}\n\nconst UpdateListState = selector<IItem[]>({\n  key: \"@UPDATE_LIST_STATE\",\n  get: ({ get }) => get(ListItemState),\n  set: ({ set }, newValue) => {\n    if (!(newValue instanceof DefaultValue))\n      set(ListItemState, (oldValue) => updateSearchItem(oldValue, newValue))\n  }\n})\n\nexport default UpdateListState\n","import React, { useEffect, useState } from \"react\"\nimport Accordion from \"components/Accordion/Accordion\"\nimport * as Style from \"./AccordionItem.style\"\nimport IItem from \"typings/IITem\"\nimport { ReactComponent as IconDown } from \"styles/img/down.svg\"\nimport UpdateListState from \"stores/selectors/UpdateListState\"\nimport { useSetRecoilState } from \"recoil\"\n\ninterface AccordionItemProp {\n  item: IItem\n}\n\nconst AccordionItem = ({ item }: AccordionItemProp) => {\n  const { id, name, children, level } = item\n  const [expanded, setExpanded] = useState(false)\n  const [count, setCount] = useState(0)\n  const setUpdateListState = useSetRecoilState(UpdateListState)\n  const checked =\n    (item.checked === undefined ? false : item.checked) || count > 0\n\n  const handleChange = () => {\n    const updateChecked: boolean =\n      typeof item.checked !== \"undefined\" ? !item.checked : true\n\n    setUpdateListState([{ ...item, checked: updateChecked }])\n  }\n\n  useEffect(() => {\n    setCount(item.children.filter((child) => child.checked).length)\n  }, [item.children])\n\n  return (\n    <Style.AccordionItem\n      data-checked={checked}\n      data-count={count}\n      data-level={level}\n      data-total={children.length}\n      data-testid={`accordion-item-${id}`}\n      nv={level}\n      count={count}\n      total={children.length}\n      expanded={expanded}\n    >\n      <div>\n        <input\n          name=\"accordion-item\"\n          id={`accordion-item-${id}`}\n          type=\"checkbox\"\n          checked={checked}\n          onChange={handleChange}\n        />\n        <label htmlFor={`accordion-item-${id}`}>{name}</label>\n        {children.length > 0 && (\n          <button onClick={() => setExpanded(!expanded)} type=\"button\">\n            <IconDown fill=\"currentColor\" width={20} height={20} />\n          </button>\n        )}\n      </div>\n      {children.length > 0 && (\n        <Accordion items={children} expanded={expanded} />\n      )}\n    </Style.AccordionItem>\n  )\n}\n\nexport default React.memo(AccordionItem)\n","import styled from \"styled-components\"\n\nexport const Accordion = styled.ul`\n  list-style: none;\n  padding: 0;\n  margin: 0;\n  transition: all 0.2s linear;\n  visibility: hidden;\n  max-height: 0;\n  overflow: hidden;\n\n  &[aria-expanded=\"true\"] {\n    visibility: visible;\n    max-height: 100vh;\n    overflow-y: auto;\n  }\n`\n","import React from \"react\"\nimport AccordionItem from \"components/AccordionItem\"\nimport * as Style from \"./Accordion.style\"\nimport IItem from \"typings/IITem\"\n\ninterface AccordionProp {\n  items: IItem[]\n  expanded?: boolean\n}\n\nconst Accordion = ({ items, expanded = true }: AccordionProp) => {\n  return (\n    <Style.Accordion aria-expanded={expanded}>\n      {items.map((item) => (\n        <AccordionItem key={item.id} item={item} />\n      ))}\n    </Style.Accordion>\n  )\n}\n\nexport default Accordion\n","import Accordion from \"components/Accordion\"\nimport React from \"react\"\nimport { useRecoilValue } from \"recoil\"\nimport ListItemState from \"stores/atoms/ListItemState\"\n\nconst Home = () => {\n  const items = useRecoilValue(ListItemState)\n\n  return (\n    <div>\n      <Accordion items={items} />\n    </div>\n  )\n}\n\nexport default Home\n","import React from \"react\"\nimport Home from \"pages/Home\"\nimport { RecoilRoot } from \"recoil\"\n\nfunction App() {\n  return (\n    <RecoilRoot>\n      <React.Suspense fallback={<div>Loading...</div>}>\n        <Home />\n      </React.Suspense>\n    </RecoilRoot>\n  )\n}\n\nexport default App\n","import React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport App from \"./App\"\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n)\n"],"sourceRoot":""}